---
title: "Dati BES ISTAT"
subtitle: "Materiale intermedio su indicatori di benessere equo e sostenibile"
date: last-modified
date-format: "DD-MMMM-YYYY"
lang: it

format: html

execute:
  eval: true
  echo: false
  warning: false
  error: false
  output: false

bibliography: ../bib/CRP_dash.bib
suppress-bibliography: false
---

# R packg

```{r}
#| label: setup

library(here)
library(dplyr, warn.conflicts = FALSE, quietly = TRUE)
library(readr, quietly = TRUE)
```

# Carica dati BES

**FONTE**: ISTAT - Benessere Equo e Sostenibile (BES)  
**DATA AGGIORNAMENTO**: 2003-2023/24  
**COME OTTENUTO**: Download manuale da ISTAT Data Browser  
**CONTENUTO**: Indicatori territoriali di benessere per dominio  


## Setup directory di output

Questi vengono salvati in formato RDS nella cartella `data/data_out/bes_istat/` e usati come input per il Bilancio di missione 2025.

```{r}
#| label: setup-dirs

# Load function to extract files
source(here::here("data", "data_in", "BES", "clean_bes_csv.R"))

# Output directory
out_dir <- here::here("data", "data_out", "bes_istat")

if (!dir.exists(out_dir)) {
  dir.create(out_dir, recursive = TRUE)
}
```

## Ambiente (AMB)

```{r}
#| label: data-amb

amb_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_AMB.csv")
)
saveRDS(amb_df, here::here(out_dir, "amb_df.rds"))
```

## Benessere Economico (BEN_ECON)

```{r}
#| label: data-ben-econ

ben_econ_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_BenEcon.csv")
)
saveRDS(ben_econ_df, here::here(out_dir, "ben_econ_df.rds"))
```

## Istruzione e Formazione (IST_FORMAZ)

```{r}
#| label: data-ist-formaz

ist_formaz_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Ist_Formaz.csv")
)
saveRDS(ist_formaz_df, here::here(out_dir, "ist_formaz_df.rds"))
```

## Lavoro (LAV)

```{r}
#| label: data-lav

lav_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Lav.csv")
)
saveRDS(lav_df, here::here(out_dir, "lav_df.rds"))
```

## QualitÃ  dei Servizi (QUAL_SERV)

```{r}
#| label: data-qual-serv

qual_serv_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_QualServ.csv")
)
saveRDS(qual_serv_df, here::here(out_dir, "qual_serv_df.rds"))
```

## Politica e Istituzioni (REL_POL)

```{r}
#| label: data-rel-pol

rel_pol_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Rel_Pol.csv")
)
saveRDS(rel_pol_df, here::here(out_dir, "rel_pol_df.rds"))
```

## Salute (SAL)

```{r}
#| label: data-sal

sal_df <- importa_istat_bes(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Sal.csv")
)
saveRDS(sal_df, here::here(out_dir, "sal_df.rds"))
```

## Patrimonio Culturale (PATR_CULT)

```{r}
#| label: data-patr-cult

patr_cult_df <- importa_istat_bes_ultra(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Pat.csv")
)
saveRDS(patr_cult_df, here::here(out_dir, "patr_cult_df.rds"))
```

## Sicurezza (SIC)

```{r}
#| label: data-sic

sic_df <- importa_istat_bes_ultra(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_SIC.csv")
)
saveRDS(sic_df, here::here(out_dir, "sic_df.rds"))
```

## Ricerca e Innovazione (RIC_INNOV)

```{r}
#| label: data-ric-innov

ric_innov_df <- importa_istat_bes_ultra(
  here::here("data", "data_in", "BES", "dati_input",
             "Indicatori per singolo territorio (IT1,DF_BES_TERRIT_0,1.0)_Ric_Inn.csv")
)
saveRDS(ric_innov_df, here::here(out_dir, "ric_innov_df.rds"))
```
