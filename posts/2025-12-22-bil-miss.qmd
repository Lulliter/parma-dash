---
title: "Input per bilancio di missione"
date: last-modified
date-format: "DD-MMMM-YYYY"
lang: it

format:
  html:
    theme: flatly #spacelab
    # css: utils/style.css
    code-fold: true # redundant bc echo false 
    toc-depth: 3
    toc_float: true
    toc-location: left
    toc-title: Indice
    embed-resources: true # external dependencies embedded (Not in ..._files/)
  docx:
    toc: false
    toc-depth: 3
    toc-title: "Indice"
    highlight-style: tango #github
    embed-resources: true
    page-width: 9
    fig-width: 8  # per usare tutta la larghezza della pagina!!!
    fig-height: 6
    dpi: 300
execute:
  eval: true
  echo: false # x mostrare codice anche in file docx
  warning: false
  error: false
  output: true

#bibliography: ../../bib/CRP_dash.bib
#suppress-bibliography: false
---


```{r}
# Packgs and functions ----
library(here)
library(fs)
library(janitor)
library(dplyr)
library(tidyr)
library(readxl)
library(janitor)
library(skimr)
library(forcats)
library(glue)
library(stringr)

library(flextable)

library(ggplot2)
library(ggiraph)
library(camcorder)
library(patchwork) # for combining ggplots
# p1 + p2                    # Affiancati
# p1 / p2                    # Uno sopra l'altro
# p1 | p2                    # Affiancati (equivalente a +)
# (p1 + p2) / p3             # Layout complesso
# p1 + p2 + plot_layout(ncol = 2)  # Specificare colonne

# Colors ----
grey_extra_sc <- "#4F4F4F"
grey_sc <- "#808080"
grey_md1 <- "#A9A9A9"
grey_md2 <- "#D3D3D3"
grey_extrlight <- "#FDFBF7"
burg_sc <- "#5C2129"
burg_md <- "#873C4A"
burg_lg <- "#B85E6A"
blu_sc <- "#033c55"
blu_md <- "#005d82"
blu_lg <- "#5582a7"
grn_sc <- "#246864"
grn_md <- "#539d90"
grn_lg <- "#8eb9b1"
```


```{r}
# ------- R utilities and functions  
#source(file = here("R","f_recap_values.R")) # # f_recap_values(df, c("col1","col2"))
source(file = here("R","f_ft_formatting.R")) # %>% f_ft_properties()

source(file = here("R","f_ggplot2.R")) # custom ggplot2 theme
```

# Dati cartelle di input e output
```{r}
# Directories ----
dir_data_in <- here::here("posts", "data_in", "istat_demo_2002_2024")
dir_data_out <- here::here("posts", "data_out")

# --- üìÇ Load dataset 1) ----
indicatori_di_struttura <- readRDS(fs::path(
  dir_data_in,
  "indicatori_di_struttura.rds"
))


tabyl(indicatori_di_struttura$indicatore)
```

# Trend generali e territoriali 
I cambiamenti della societ√† e gli impatti per il sistema di welfare

## 1. Scenario demografico
Aumento della popolazione anziana e longevit√†

### Et√† media

```{r}
#| label: e_m_data

# ------- Arguments for plot
INDICATORE <- "Et√† media"
UDM <- "anni e decimi di anno"
TITLE <- glue("Trend demografici: {INDICATORE}")
SUBTIT <- glue("Indicatore espresso in: {UDM}")
CAP <- "Fonte: Istat, Demografia in cifre, Nov. 2025"

# ------- Read input data
e_m_data <- indicatori_di_struttura |>
  dplyr::filter(
    territorio %in%
      c(
        # "Bologna",
        # "Piacenza",
        "Parma",
        # "Reggio nell'Emilia",
        # "Modena",
        # "Ferrara",
        # "Ravenna",
        # "Forli'",
        # "Rimini",
        "Emilia-Romagna",
        # "NORD-EST",
        "ITALIA"
      )
  ) |>
  dplyr::mutate(
    highlight = territorio %in%
      c("Parma", "Emilia-Romagna", "ITALIA"),
    territorio_display = ifelse(highlight, territorio, "Altro")
  ) |>
  #maintain
  dplyr::mutate(
    territorio_display = factor(
      territorio_display,
      levels = c("Parma", "Emilia-Romagna", "ITALIA", "Altro")
    ),
    highlight = factor(highlight)
  ) |> 
  dplyr::filter(indicatore == INDICATORE)

# ------- Save data and plot objects
# as RDS
saveRDS(object =  e_m_data, file = here(dir_data_out, "e_m_data.rds"))
# as XLSX
writexl::write_xlsx(x = e_m_data, path = here(dir_data_out, "e_m_data.xlsx"))
# as PNG (manuale)
```


```{r}
#| label: e_m_plot
#| output: true
 
# Plot: e_m_plot [= Et√† Media]  ----
e_m_plot <- e_m_data |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio_display,
    group = territorio)) +
  # Linee normali
  geom_line(linewidth = rel(1.2)) +
  # Linea pi√π spessa per Parma ed Emilia-Romagna
  geom_line(
    data = \(df) df |> filter(territorio %in% c("Parma", "Emilia-Romagna")),
    linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(e_m_data$anno), max(e_m_data$anno), by = 1),
    limits = c(min(e_m_data$anno), max(e_m_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(size = rel(1.3), face = "bold", margin = margin(b = 10)),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")) +
  labs(
    title = TITLE,
    subtitle = SUBTIT,
    caption = CAP,
    x = "",
    y = "")  

# Stampa il grafico (questo triggera il salvataggio)
e_m_plot
```

### Indice di vecchiaia

```{r}
#| label: i_v_data

# ------- Arguments for plot
INDICATORE <- "Indice di vecchiaia"
UDM <- "% tra popolazione di 65+ anni e in et√† 0-14"
TITLE <- glue("Trend demografici: {INDICATORE}")
SUBTIT <- glue("Indicatore espresso in: {UDM}")
CAP <- "Fonte: Istat, Demografia in cifre, Nov. 2025"

# ------- Read input data
i_v_data <- indicatori_di_struttura |>
  dplyr::filter(
    territorio %in%
      c(
        # "Bologna",
        # "Piacenza",
        "Parma",
        # "Reggio nell'Emilia",
        # "Modena",
        # "Ferrara",
        # "Ravenna",
        # "Forli'",
        # "Rimini",
        "Emilia-Romagna",
        # "NORD-EST",
        "ITALIA"
      )
  ) |>
  dplyr::mutate(
    highlight = territorio %in%
      c("Parma", "Emilia-Romagna", "ITALIA"),
    territorio_display = ifelse(highlight, territorio, "Altro")
  ) |>
  #maintain
  dplyr::mutate(
    territorio_display = factor(
      territorio_display,
      levels = c("Parma", "Emilia-Romagna", "ITALIA", "Altro")
    ),
    highlight = factor(highlight)
  ) |> 
  dplyr::filter(indicatore == INDICATORE)


# ------- Save data and plot objects
# as RDS
saveRDS(object =  i_v_data, file = here(dir_data_out, "i_v_data.rds"))
# as XLSX
writexl::write_xlsx(x = i_v_data, path = here(dir_data_out, "i_v_data.xlsx"))
```

```{r}
#| label: i_v_plot
#| output: true
 
# Plot: i_v_plot [= Et√† Media]  ----
i_v_plot <- i_v_data |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio_display,
    group = territorio)) +
  # Linee normali
  geom_line(linewidth = rel(1.2)) +
  # Linea pi√π spessa per Parma ed Emilia-Romagna
  geom_line(
    data = \(df) df |> filter(territorio %in% c("Parma", "Emilia-Romagna")),
    linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(i_v_data$anno), max(i_v_data$anno), by = 1),
    limits = c(min(i_v_data$anno), max(i_v_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(size = rel(1.3), face = "bold", margin = margin(b = 10)),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")) +
  labs(
    title = TITLE,
    subtitle = SUBTIT,
    caption = CAP,
    x = "",
    y = "")  

# Stampa il grafico (questo triggera il salvataggio)
i_v_plot
```

### Speranza di vita a 65 anni

```{r}
#| label: s_v_65_data

# ------- Load dataset
speranza_di_vita_65 <- readRDS(fs::path(dir_data_in, "speranza_di_vita_65.rds"))

s_v_65_data <- speranza_di_vita_65 |>
  dplyr::filter(sotto_categoria == "Maschi e femmine") |>  # Filter first
  dplyr::filter(
    territorio %in%
      c("Parma",
        # "Bologna", "Piacenza",  "Reggio nell'Emilia",
        # "Modena", "Ferrara", "Ravenna", "Forli'", "Rimini","NORD-EST",
        "Emilia-Romagna",  "ITALIA")) 

# ------- Save data  objects
# as RDS
saveRDS(object =  s_v_65_data, file = here(dir_data_out, "s_v_65_data.rds"))
# as XLSX
writexl::write_xlsx(x = s_v_65_data, path = here(dir_data_out, "s_v_65_data.xlsx"))
```


```{r}
#| label: s_v_65_plot
#| output: true

s_v_65_plot <- s_v_65_data |>
  dplyr::filter(indicatore == "speranza_di_vita_65") |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio,
    group = territorio)) +
  geom_line(linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(s_v_65_data$anno), max(s_v_65_data$anno), by = 1),
    limits = c(min(s_v_65_data$anno), max(s_v_65_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(
      size = rel(1.3),
      face = "bold",
      margin = margin(b = 10)),
    plot.subtitle = element_text(
      size = rel(0.95),
      lineheight = 1.2,
      margin = margin(b = 10)),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")) +
  labs(
    title = "Trend demografici: speranza di vita a 65 anni",
    subtitle = "Indicatore espresso in: numero medio di anni che restano da vivere a 65 anni",
    caption = CAP,
    x = "",
    y = "")

s_v_65_plot
```


### Indice di dipendenza anziani

```{r}
#| label: i_d_a_data

# ------- Arguments for plot
INDICATORE <- "Indice di dipendenza anziani"
UDM <- "% tra popolazione di 65+ e in et√† attiva (15-64 anni)"
TITLE <- glue("Trend demografici: {INDICATORE}")
SUBTIT <- glue("Indicatore espresso in: {UDM}")
CAP <- "Fonte: Istat, Demografia in cifre, Nov. 2025"

# ------- Read input data
i_d_a_data <- indicatori_di_struttura |>
  dplyr::filter(
    territorio %in%
      c(
        # "Bologna",
        # "Piacenza",
        "Parma",
        # "Reggio nell'Emilia",
        # "Modena",
        # "Ferrara",
        # "Ravenna",
        # "Forli'",
        # "Rimini",
        "Emilia-Romagna",
        # "NORD-EST",
        "ITALIA"
      )
  ) |>
  dplyr::mutate(
    highlight = territorio %in%
      c("Parma", "Emilia-Romagna", "ITALIA"),
    territorio_display = ifelse(highlight, territorio, "Altro")
  ) |>
  #maintain
  dplyr::mutate(
    territorio_display = factor(
      territorio_display,
      levels = c("Parma", "Emilia-Romagna", "ITALIA", "Altro")
    ),
    highlight = factor(highlight)
  ) |> 
  dplyr::filter(indicatore == INDICATORE)


# ------- Save data and plot objects
# as RDS
saveRDS(object =  i_d_a_data, file = here(dir_data_out, "i_d_a_data.rds"))
# as XLSX
writexl::write_xlsx(x = i_d_a_data, path = here(dir_data_out, "i_d_a_data.xlsx"))
```

```{r}
#| label: i_d_a_plot
#| output: true
 
# Plot: i_d_a_plot [= Et√† Media]  ----
i_d_a_plot <- i_d_a_data |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio_display,
    group = territorio)) +
  # Linee normali
  geom_line(linewidth = rel(1.2)) +
  # Linea pi√π spessa per Parma ed Emilia-Romagna
  geom_line(
    data = \(df) df |> filter(territorio %in% c("Parma", "Emilia-Romagna")),
    linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(i_d_a_data$anno), max(i_d_a_data$anno), by = 1),
    limits = c(min(i_d_a_data$anno), max(i_d_a_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(size = rel(1.3), face = "bold", margin = margin(b = 10)),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")) +
  labs(
    title = TITLE,
    subtitle = SUBTIT,
    caption = CAP,
    x = "",
    y = "")  

# Stampa il grafico (questo triggera il salvataggio)
i_d_a_plot
```


### Indice di dipendenza strutturale

```{r}
#| label: i_d_s_data

# ------- Arguments for plot
INDICATORE <- "Indice di dipendenza strutturale"
UDM <- "% tra popolazione in et√† non attiva (0-14 e 65+ anni) e in et√† attiva (15-64 anni)"
TITLE <- glue("Trend demografici: {INDICATORE}")
SUBTIT <- glue("Indicatore espresso in: {UDM}")
CAP <- "Fonte: Istat, Demografia in cifre, Nov. 2025"

# ------- Read input data
i_d_s_data <- indicatori_di_struttura |>
  dplyr::filter(
    territorio %in%
      c(
        # "Bologna",
        # "Piacenza",
        "Parma",
        # "Reggio nell'Emilia",
        # "Modena",
        # "Ferrara",
        # "Ravenna",
        # "Forli'",
        # "Rimini",
        "Emilia-Romagna",
        # "NORD-EST",
        "ITALIA"
      )
  ) |>
  dplyr::mutate(
    highlight = territorio %in%
      c("Parma", "Emilia-Romagna", "ITALIA"),
    territorio_display = ifelse(highlight, territorio, "Altro")
  ) |>
  #maintain
  dplyr::mutate(
    territorio_display = factor(
      territorio_display,
      levels = c("Parma", "Emilia-Romagna", "ITALIA", "Altro")
    ),
    highlight = factor(highlight)
  ) |> 
  dplyr::filter(indicatore == INDICATORE)


# ------- Save data and plot objects
# as RDS
saveRDS(object =  i_d_s_data, file = here(dir_data_out, "i_d_s_data.rds"))
# as XLSX
writexl::write_xlsx(x = i_d_s_data, path = here(dir_data_out, "i_d_s_data.xlsx"))
```

```{r}
#| label: i_d_s_plot
#| output: true
 
# Plot: i_d_s_plot [= Et√† Media]  ----
i_d_s_plot <- i_d_s_data |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio_display,
    group = territorio)) +
  # Linee normali
  geom_line(linewidth = rel(1.2)) +
  # Linea pi√π spessa per Parma ed Emilia-Romagna
  geom_line(
    data = \(df) df |> filter(territorio %in% c("Parma", "Emilia-Romagna")),
    linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(i_d_s_data$anno), max(i_d_s_data$anno), by = 1),
    limits = c(min(i_d_s_data$anno), max(i_d_s_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(size = rel(1.3), face = "bold", margin = margin(b = 10)),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")) +
  labs(
    title = TITLE,
    subtitle = SUBTIT,
    caption = CAP,
    x = "",
    y = "")  

# Stampa il grafico (questo triggera il salvataggio)
i_d_s_plot
```

### Crescita naturale della popolazione

```{r}
#| label: c_n_data

crescita_naturale <- readRDS(fs::path(
  dir_data_in,
  "crescita_naturale.rds"
))

c_n_data <- crescita_naturale |>
  dplyr::filter(territorio %in% c("Parma", "Emilia-Romagna", "ITALIA")) |>
  dplyr::mutate(
    territorio = factor(territorio, levels = c("Parma", "Emilia-Romagna", "ITALIA"))
  )

```

```{r}
#| label: c_n_plot
#| output: true

c_n_plot <- c_n_data |>
  dplyr::filter(indicatore == "crescita_naturale") |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio,
    group = territorio
  )) +
  geom_line(linewidth = rel(1.2)) +
  scale_x_continuous(
    breaks = seq(min(c_n_data$anno), max(c_n_data$anno), by = 1),
    limits = c(min(c_n_data$anno), max(c_n_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))
  ) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md
    )
  ) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(
      size = rel(1.3),
      face = "bold",
      margin = margin(b = 10)
    ),
    plot.subtitle = element_text(
      size = rel(0.95),
      lineheight = 1.2,
      margin = margin(b = 10)
    ),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")
  ) +
  labs(
    title = "Trend demografici: crescita naturale",
    subtitle = "Indicatore espresso in: differenza tra il tasso di natalit√† e il tasso di mortalit√†",
    caption = CAP,
    x = "",
    y = ""
  )

c_n_plot
```

```{r}
#| label: c_n_data_save

# ------- Save data and plot objects
# as RDS
saveRDS(object =  c_n_data, file = here(dir_data_out, "c_n_data.rds"))
# as XLSX
writexl::write_xlsx(x = c_n_data, path = here(dir_data_out, "c_n_data.xlsx"))

```


### Saldo migratorio

```{r}
#| label: s_m_data

# ------- Load dataset
saldo_migratorio <- readRDS(fs::path(dir_data_in, "saldo_migratorio_totale.rds"))

# ------- Read input data
s_m_data <- saldo_migratorio |>
  dplyr::filter(
    territorio %in%
      c(
        # "Bologna",
        # "Piacenza",
        "Parma",
        # "Reggio nell'Emilia",
        # "Modena",
        # "Ferrara",
        # "Ravenna",
        # "Forli'",
        # "Rimini",
        "Emilia-Romagna",
        # "NORD-EST",
        "ITALIA"
      )
  )  

# ------- Save data and plot objects
# as RDS
saveRDS(object =  s_m_data, file = here(dir_data_out, "s_m_data.rds"))
# as XLSX
writexl::write_xlsx(x = s_m_data, path = here(dir_data_out, "s_m_data.xlsx"))
```

```{r}
#| label: s_m_plot
#| output: true
 
# Plot: i_d_s_plot [= Et√† Media]  ----
s_m_plot <- s_m_data |>
  ggplot(aes(
    x = anno,
    y = valore,
    color = territorio,
    group = territorio)) +
  geom_line(linewidth = rel(1.2) ) +
  scale_x_continuous(
    breaks = seq(min(s_m_data$anno), max(s_m_data$anno), by = 1),
    limits = c(min(s_m_data$anno), max(s_m_data$anno)),
    expand = expansion(mult = c(0.02, 0.02))) +
  scale_color_manual(
    values = c(
      "Parma" = burg_md,
      "Emilia-Romagna" = grn_md,
      "ITALIA" = blu_md)  ) +
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major = element_line(color = "grey90", linewidth = rel(0.3)),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.85)),
    axis.text.y = element_text(size = rel(0.85)),
    axis.title = element_text(size = rel(1), face = "bold"),
    plot.title = element_text(
      size = rel(1.3),
      face = "bold",
      margin = margin(b = 10) ),
    plot.subtitle = element_text(
      size = rel(0.95),
      lineheight = 1.2,
      margin = margin(b = 10)  ),
    strip.text = element_text(size = rel(1.1), face = "bold"),
    legend.text = element_text(size = rel(0.9)),
    legend.title = element_blank(),
    legend.position = "bottom",
    panel.spacing = unit(1, "lines")  ) +
  labs(
    title = "Trend demografici: saldo migratorio totale",
    subtitle = "Indicatore espresso in: differenza tra num. iscritti ed num. cancellati dai registri anagrafici per trasferimento di residenza",
    caption = CAP,
    x = "",
    y = "")
# Stampa il grafico (questo triggera il salvataggio)
s_m_plot
```



<!-- ### Migrazione e diversit√† culturale -->

# ____

## 2. Economia e disuguaglianze

<!-- ### PIL e reddito pro capite -->

### Disuguaglianze economiche (geolocalizzazione della fragilit√†)

### Lavoro povero

# ____

## 3. Territorio e ambiente che cambia 

### Servizi 
Pi√π librerie, pi√π musei, pi√π strutture, pi√π verde urbano ecc

## 4. Persone e istituzioni

CAPITALE SOCIALE: Tessuto sociale vitale con un terzo settore numeroso e ben rappresentato

RICERCA E INNOVAZIONE Ricerca e innovazione

### IA e automazione

